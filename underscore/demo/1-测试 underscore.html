<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>1-测试 underscore</title>
</head>
<body>
<!-- 	<button onclick="clickMeT()">throttle</button>
	<button onclick="clickMeD()">debounce</button>
	<button onclick="clickMeA()">after</button> -->

	<!-- <script src="./lib/underscore-min.js"></script> -->
	<script src="../reading.js"></script>
	<script>

		/**
		 * _.throttle
		 */
		// const clickMeT = _.throttle(function(){
		// 	console.log('hello world')
		// }, 10000, {})

		/**
		 * _.debounce
		 */
		// const clickMeD = _.debounce(function(){
		// 	console.log('hello world')
		// }, 10000)


		/**
		 * _.after
		 */
		// const clickMeA = _.after(5, function(){
		// 	console.log('hello')
		// })

		window.onload = function() {

			// Collection Functions (Arrays or Objects)
			
			/**
			 * 1. _.each
			 */
			// _.each([1, 2, 3], function(element, index, list){
			// 	console.log(element+2);
			// });

			
			/**
			 * 2. _
			 */
			// var _ = function(obj) {
			// 	console.log('this =', this)
			//     if (obj instanceof _) return obj;
			//     if (!(this instanceof _)) return new _(obj);
			//     this._wrapped = obj;
			// };

			// // var a = _({name: 'zhangsan'})
			// // console.log('a =', a)

			// var b = _(new _({name: 'zhangsan'}))
			// console.log('b =', b)

			// var c = _(b)
			// console.log('c =', c)
			
			/**
			 * 3. _.has
			 */
			// const obj = { name: 'hello' }
			// console.log(_.has(obj, 'name'))

			// const obj2 = { name: { hello: { world: { hi: 'hi' } } } }
			// const arr = ['name', 'hello', 'world', 'hi']
			// console.log(_.has(obj2, arr))
			
			/**
			 * 4. arguments
			 * 箭头函数的 arguments 指向的是外层的，箭头函数内无法使用自己函数的 arguments
			 * 可以使用 rest
			 */
			// const wrapFunc = function(a, b) {
			// 	console.log(arguments.length)
			// 	console.log(arguments)
			// 	console.log(arguments[0])
			// 	console.log(arguments[1])
			// 	return c => {
			// 		console.log(arguments.length)
			// 		console.log(arguments)
			// 		console.log(arguments[0])
			// 		console.log(arguments[1])
			// 		return (...d) => {
			// 			console.log(d.length)
			// 			console.log(d[0])
			// 			console.log(d[1])
			// 		}
			// 	}
			// }

			// wrapFunc(1, 2)(3)(4, 5)
			
			/**
			 * 5. _.assign
			 */
			// const obj = { name: 'hi' }
			// console.log(_.assign(obj, {age: 13}, {gender: 'male', name: 'hello'}))

			/**
			 * 6. _.isMatch
			 */
			// console.log(_.isMatch({name:'hi', world: 'welcome'}, {name: 'hi'})) // true
			// console.log(_.isMatch({name:'hi', world: 'welcome'}, {name2: 'hi'})) // false
			
			/**
			 * 7. _.restArgs
			 */
			// console.log(_.restArgs(function(){console.log('hello')})())
			// console.log(_.restArgs(function(){console.log(this.a)}, 1, 2))
			
			/**
			 * 8. _.pluck(obj, key)
			 */
			// const obj = {
			// 	i: {
			// 		a: 1,
			// 	},
			// 	j: {
			// 		a: 2,
			// 	},
			// 	k: {
			// 		b: 3,
			// 	},
			// 	m: {
			// 		a: {
			// 			b: {
			// 				c: 4,
			// 			},
			// 		},
			// 	}
			// }
			// console.log(_.pluck(obj, 'a'))
			// console.log(_.pluck(obj, 'b'))
			// console.log(_.pluck(obj, ['b']))
			// console.log(_.pluck(obj, ['a', 'b', 'c']))
			
			/**
			 * _.memoize
			 */
			// var fibonacci = _.memoize(function(n) {
			//  	return n < 2 ? n : fibonacci(n - 1) + fibonacci(n - 2);
			// });
			
			/**
			 * _.compose
			 */
			// console.log(_.compose(function(a){
			// 	console.log(a)
			// }, function(){
			// 	console.log('2')
			// 	return 1
			// })())
			
			/**
			 * _.pick
			 */
			// const a = { a: 1, b: 2, c: 3}
			// console.log(_.pick(a, ['a', 'b']))

			/**
			 * _
			 */
			var _ = function(obj) {
				if (obj instanceof _) {
					return obj
				}
				if (!(this instanceof _)) {
					return new _(obj)
				}
				this._wrapped = obj
			}

			const obj1 = {a: 1}
			const obj2 = new _(2)
			const obj3 = new _(obj1)
			const obj4 = new _(obj2)
			console.log(obj1, obj2, obj3, obj4)
			console.log(obj2 === obj4)
			console.log(_(2))

		}
	</script>
</body>
</html>